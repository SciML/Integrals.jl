<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Frequently Asked Questions · Integrals.jl</title><meta name="title" content="Frequently Asked Questions · Integrals.jl"/><meta property="og:title" content="Frequently Asked Questions · Integrals.jl"/><meta property="twitter:title" content="Frequently Asked Questions · Integrals.jl"/><meta name="description" content="Documentation for Integrals.jl."/><meta property="og:description" content="Documentation for Integrals.jl."/><meta property="twitter:description" content="Documentation for Integrals.jl."/><meta property="og:url" content="https://docs.sciml.ai/Integrals/stable/basics/FAQ/"/><meta property="twitter:url" content="https://docs.sciml.ai/Integrals/stable/basics/FAQ/"/><link rel="canonical" href="https://docs.sciml.ai/Integrals/stable/basics/FAQ/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Integrals.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Integrals.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Integrals.jl: Unified Integral Approximation Interface</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/numerical_integrals/">Numerically Solving Integrals</a></li><li><a class="tocitem" href="../../tutorials/differentiating_integrals/">Differentiating Integrals</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../IntegralProblem/">Integral Problems</a></li><li><a class="tocitem" href="../IntegralFunction/">Integral Functions</a></li><li><a class="tocitem" href="../SampledIntegralProblem/">Integrating pre-sampled data</a></li><li><a class="tocitem" href="../solve/">Common Solver Options (Solve Keyword Arguments)</a></li><li class="is-active"><a class="tocitem" href>Frequently Asked Questions</a><ul class="internal"><li><a class="tocitem" href="#How-should-I-use-the-in-place-interface?"><span>How should I use the in-place interface?</span></a></li><li><a class="tocitem" href="#How-should-I-use-the-batch-interface?"><span>How should I use the batch interface?</span></a></li><li><a class="tocitem" href="#What-should-I-do-if-my-solution-is-not-converged?"><span>What should I do if my solution is not converged?</span></a></li><li><a class="tocitem" href="#How-can-I-integrate-arbitrarily-spaced-data?"><span>How can I integrate arbitrarily-spaced data?</span></a></li><li><a class="tocitem" href="#How-can-I-integrate-on-arbitrary-geometries?"><span>How can I integrate on arbitrary geometries?</span></a></li><li><a class="tocitem" href="#I-don&#39;t-see-algorithm-X-or-quadrature-scheme-Y-?"><span>I don&#39;t see algorithm X or quadrature scheme Y ?</span></a></li><li><a class="tocitem" href="#My-integrand-works-with-algorithm-X-but-fails-on-algorithm-Y"><span>My integrand works with algorithm X but fails on algorithm Y</span></a></li><li><a class="tocitem" href="#Can-I-take-derivatives-with-respect-to-the-limits-of-integration?"><span>Can I take derivatives with respect to the limits of integration?</span></a></li></ul></li></ul></li><li><span class="tocitem">Solvers</span><ul><li><a class="tocitem" href="../../solvers/IntegralSolvers/">Integral Solver Algorithms</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Basics</a></li><li class="is-active"><a href>Frequently Asked Questions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Frequently Asked Questions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/Integrals.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/Integrals.jl/blob/master/docs/src/basics/FAQ.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Frequently-Asked-Questions"><a class="docs-heading-anchor" href="#Frequently-Asked-Questions">Frequently Asked Questions</a><a id="Frequently-Asked-Questions-1"></a><a class="docs-heading-anchor-permalink" href="#Frequently-Asked-Questions" title="Permalink"></a></h1><h2 id="How-should-I-use-the-in-place-interface?"><a class="docs-heading-anchor" href="#How-should-I-use-the-in-place-interface?">How should I use the in-place interface?</a><a id="How-should-I-use-the-in-place-interface?-1"></a><a class="docs-heading-anchor-permalink" href="#How-should-I-use-the-in-place-interface?" title="Permalink"></a></h2><p>The in-place interface allows evaluating vector-valued integrands without allocating an output array. This can be beneficial for reducing allocations when integrating many functions simultaneously or to make use of existing in-place code. However, note that not all algorithms use in-place operations under the hood, i.e. <a href="../../solvers/IntegralSolvers/#Integrals.HCubatureJL"><code>HCubatureJL</code></a>, and may still allocate.</p><p>You can construct an <code>IntegralFunction(f, prototype)</code>, where <code>f</code> is of the form <code>f(y, u, p)</code> where <code>prototype</code> is of the desired type and shape of <code>y</code>.</p><p>For small array outputs of a known size, consider using StaticArrays.jl for the return value of your integrand.</p><h2 id="How-should-I-use-the-batch-interface?"><a class="docs-heading-anchor" href="#How-should-I-use-the-batch-interface?">How should I use the batch interface?</a><a id="How-should-I-use-the-batch-interface?-1"></a><a class="docs-heading-anchor-permalink" href="#How-should-I-use-the-batch-interface?" title="Permalink"></a></h2><p>The batch interface allows evaluating one (or more) integrals simultaneously at different points, which maximizes the parallelism for a given algorithm.</p><p>You can construct an out-of-place <code>BatchIntegralFunction(bf)</code> where <code>bf</code> is of the form <code>bf(u, p) = stack(x -&gt; f(x, p), eachslice(u; dims=ndims(u)))</code>, where <code>f</code> is the (unbatched) integrand. For interoperability with as many algorithms as possible, it is important that your out-of-place batch integrand accept an <strong>empty</strong> array of quadrature points and still return an output with a size and type consistent with the non-empty case.</p><p>You can construct an in-place <code>BatchIntegralFunction(bf, prototype)</code>, where <code>bf</code> is of the form <code>bf(y, u, p) = foreach((y,x) -&gt; f(y,x,p), eachslice(y, dims=ndims(y)), eachslice(x, dims=ndims(x)))</code>.</p><p>Note that not all algorithms use in-place batched operations under the hood, i.e. <a href="../../solvers/IntegralSolvers/#Integrals.QuadGKJL"><code>QuadGKJL</code></a>.</p><h2 id="What-should-I-do-if-my-solution-is-not-converged?"><a class="docs-heading-anchor" href="#What-should-I-do-if-my-solution-is-not-converged?">What should I do if my solution is not converged?</a><a id="What-should-I-do-if-my-solution-is-not-converged?-1"></a><a class="docs-heading-anchor-permalink" href="#What-should-I-do-if-my-solution-is-not-converged?" title="Permalink"></a></h2><p>Certain algorithms, such as <a href="../../solvers/IntegralSolvers/#Integrals.QuadratureRule"><code>QuadratureRule</code></a> used a fixed number of points to calculate an integral and cannot provide an error estimate. In this case, you have to increase the number of points and check the convergence yourself, which will depend on the accuracy of the rule you choose.</p><p>For badly-behaved integrands, such as (nearly) singular and highly oscillatory functions, most algorithms will fail to converge and either throw an error or silently return the incorrect result. In some cases Integrals.jl can provide an error code when things go wrong, but otherwise you can always check if the error estimate for the integral is less than the requested tolerance, e.g. <code>sol.resid &lt; max(abstol, reltol*norm(sol.u))</code>. Sometimes using a larger tolerance or higher precision arithmetic may help.</p><h2 id="How-can-I-integrate-arbitrarily-spaced-data?"><a class="docs-heading-anchor" href="#How-can-I-integrate-arbitrarily-spaced-data?">How can I integrate arbitrarily-spaced data?</a><a id="How-can-I-integrate-arbitrarily-spaced-data?-1"></a><a class="docs-heading-anchor-permalink" href="#How-can-I-integrate-arbitrarily-spaced-data?" title="Permalink"></a></h2><p>See <a href="../SampledIntegralProblem/#SciMLBase.SampledIntegralProblem"><code>SampledIntegralProblem</code></a>.</p><h2 id="How-can-I-integrate-on-arbitrary-geometries?"><a class="docs-heading-anchor" href="#How-can-I-integrate-on-arbitrary-geometries?">How can I integrate on arbitrary geometries?</a><a id="How-can-I-integrate-on-arbitrary-geometries?-1"></a><a class="docs-heading-anchor-permalink" href="#How-can-I-integrate-on-arbitrary-geometries?" title="Permalink"></a></h2><p>You can&#39;t, since Integrals.jl currently supports integration on hypercubes because that is what lower-level packages implement.</p><h2 id="I-don&#39;t-see-algorithm-X-or-quadrature-scheme-Y-?"><a class="docs-heading-anchor" href="#I-don&#39;t-see-algorithm-X-or-quadrature-scheme-Y-?">I don&#39;t see algorithm X or quadrature scheme Y ?</a><a id="I-don&#39;t-see-algorithm-X-or-quadrature-scheme-Y-?-1"></a><a class="docs-heading-anchor-permalink" href="#I-don&#39;t-see-algorithm-X-or-quadrature-scheme-Y-?" title="Permalink"></a></h2><p>Fixed quadrature rules from other packages can be used with <code>QuadratureRule</code>. Otherwise, feel free to open an issue or pull request.</p><h2 id="My-integrand-works-with-algorithm-X-but-fails-on-algorithm-Y"><a class="docs-heading-anchor" href="#My-integrand-works-with-algorithm-X-but-fails-on-algorithm-Y">My integrand works with algorithm X but fails on algorithm Y</a><a id="My-integrand-works-with-algorithm-X-but-fails-on-algorithm-Y-1"></a><a class="docs-heading-anchor-permalink" href="#My-integrand-works-with-algorithm-X-but-fails-on-algorithm-Y" title="Permalink"></a></h2><p>While bugs are not out of the question, certain algorithms, especially those implemented in C, are not compatible with arbitrary Julia types and have to return specific numeric types or arrays thereof. In some cases, such as <a href="../../solvers/IntegralSolvers/#Integrals.ArblibJL"><code>ArblibJL</code></a>, it is also expected that the integrand work with a custom quadrature point type. Moreover, some algorithms, such as <a href="../../solvers/IntegralSolvers/#Integrals.VEGAS"><code>VEGAS</code></a>, only support scalar integrands. For more details see the <a href="../../solvers/IntegralSolvers/#solvers">solver page</a>.</p><h2 id="Can-I-take-derivatives-with-respect-to-the-limits-of-integration?"><a class="docs-heading-anchor" href="#Can-I-take-derivatives-with-respect-to-the-limits-of-integration?">Can I take derivatives with respect to the limits of integration?</a><a id="Can-I-take-derivatives-with-respect-to-the-limits-of-integration?-1"></a><a class="docs-heading-anchor-permalink" href="#Can-I-take-derivatives-with-respect-to-the-limits-of-integration?" title="Permalink"></a></h2><p>Currently this is not implemented.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../solve/">« Common Solver Options (Solve Keyword Arguments)</a><a class="docs-footer-nextpage" href="../../solvers/IntegralSolvers/">Integral Solver Algorithms »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Monday 10 February 2025 14:46">Monday 10 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
